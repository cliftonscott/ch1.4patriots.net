!function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var i=t.data(this[0],"validator");return i?i:(i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){i.submitButton=this}),this.submit(function(e){function s(){if(i.settings.submitHandler){if(i.submitButton)var e=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&e.remove(),!1}return!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e&=i.element(this)}),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s=this[0];if(e){var n=t.data(s.form,"validator").settings,r=n.rules,a=t.validator.staticRules(s);switch(e){case"add":t.extend(a,t.validator.normalizeRule(i)),r[s.name]=a,i.messages&&(n.messages[s.name]=t.extend(n.messages[s.name],i.messages));break;case"remove":if(!i)return delete r[s.name],a;var u={};return t.each(i.split(/\s/),function(t,e){u[e]=a[e],delete a[e]}),u}}var o=t.validator.normalizeRules(t.extend({},t.validator.metadataRules(s),t.validator.classRules(s),t.validator.attributeRules(s),t.validator.staticRules(s)),s);if(o.required){var l=o.required;delete o.required,o=t.extend({required:l},o)}return o}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+e.value)},filled:function(e){return!!t.trim(""+e.value)},unchecked:function(t){return!t.checked}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1==arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),i)}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.errorsFor(t).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t){(t.name in this.submitted||t==this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,"");i.settings[s]&&i.settings[s].call(i,this[0])}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,s){t.each(s.split(/\s/),function(t,s){i[s]=e})});var s=this.settings.rules;t.each(s,function(e,i){s[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",e).validateDelegate(":radio, :checkbox, select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.clean(e),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e);return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1==t.grep(this.errorList,function(t){return t.element.name==e.name}).length&&e},elements:function(){var e=this,i={};return t([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){return t(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},check:function(e){e=this.clean(e),this.checkable(e)&&(e=this.findByName(e.name)[0]);var i=t(e).rules(),s=!1;for(method in i){var n={method:method,parameters:i[method]};try{var r=t.validator.methods[method].call(this,e.value.replace(/\r/g,""),e,n.parameters);if("dependency-mismatch"==r){s=!0;continue}if(s=!1,"pending"==r)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!r)return this.formatAndAdd(e,n),!1}catch(a){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+e.id+", check the '"+n.method+"' method",a),a}}return s?void 0:(this.objectLength(i)&&this.successList.push(e),!0)},customMetaMessage:function(e,i){if(t.metadata){var s=this.settings.meta?t(e).metadata()[this.settings.meta]:t(e).metadata();return s&&s.messages&&s.messages[i]}},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor==String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customMetaMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e.method),s=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,e.parameters,t):s.test(i)&&(i=jQuery.format(i.replace(s,"{$1}"),e.parameters)),this.errorList.push({message:i,element:t}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){for(var t=0;this.errorList[t];t++){var e=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,e.element,this.settings.errorClass,this.settings.validClass),this.showLabel(e.element,e.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(var t=0,i=this.validElements();i[t];t++)this.settings.unhighlight.call(this,i[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s=this.errorsFor(e);s.length?(s.removeClass().addClass(this.settings.errorClass),s.attr("generated")&&s.html(i)):(s=t("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(s).length||(this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")==i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){var i=this.currentForm;return t(document.getElementsByName(e)).map(function(t,s){return s.form==i&&s.name==e&&s||null})},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t,e){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){return!t.validator.methods.required.call(this,t.trim(e.value),e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0==this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor==String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},s=t(e);for(method in t.validator.methods){var n=s.attr(method);n&&(i[method]=n)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(e){if(!t.metadata)return{};var i=t.data(e.form,"validator").settings.meta;return i?t(e).metadata()[i]:t(e).metadata()},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,n){if(n===!1)return void delete e[s];if(n.param||n.depends){var r=!0;switch(typeof n.depends){case"string":r=!!t(n.depends,i.form).length;break;case"function":r=n.depends.call(i,i)}r?e[s]=void 0!==n.param?n.param:!0:delete e[s]}}),t.each(e,function(s,n){e[s]=t.isFunction(n)?n(i):n}),t.each(["minlength","maxlength","min","max"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){e[this]&&(e[this]=[Number(e[this][0]),Number(e[this][1])])}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e.messages&&delete e.messages,e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!=s?s:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":var n=t(i).val();return n&&n.length>0;case"input":if(this.checkable(i))return this.getLength(e,i)>0;default:return t.trim(e).length>0}},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var n=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),n.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=n.message,s="string"==typeof s&&{url:s}||s,n.old!==e){n.old=e;var r=this;this.startRequest(i);var a={};return a[i.name]=e,t.ajax(t.extend(!0,{url:s,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(s){r.settings.messages[i.name].remote=n.originalMessage;var a=s===!0;if(a){var u=r.formSubmitted;r.prepareElement(i),r.formSubmitted=u,r.successList.push(i),r.showErrors()}else{var o={},l=n.message=s||r.defaultMessage(i,"remote");o[i.name]=t.isFunction(l)?l(e):l,r.showErrors(o)}n.valid=a,r.stopRequest(i,a)}},s)),"pending"}return this.pending[i.name]?"pending":n.valid},minlength:function(e,i,s){return this.optional(i)||this.getLength(t.trim(e),i)>=s},maxlength:function(e,i,s){return this.optional(i)||this.getLength(t.trim(e),i)<=s},rangelength:function(e,i,s){var n=this.getLength(t.trim(e),i);return this.optional(i)||n>=s[0]&&n<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9-]+/.test(t))return!1;var i=0,s=0,n=!1;t=t.replace(/\D/g,"");for(var r=t.length-1;r>=0;r--){var a=t.charAt(r),s=parseInt(a,10);n&&(s*=2)>9&&(s-=9),i+=s,n=!n}return i%10==0},accept:function(t,e,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp(".("+i+")$","i"))},equalTo:function(e,i,s){var n=t(s).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()});return e==n.val()}}}),t.format=t.validator.format}(jQuery),function(t){var e=t.ajax,i={};t.ajax=function(s){s=t.extend(s,t.extend({},t.ajaxSettings,s));var n=s.port;return"abort"==s.mode?(i[n]&&i[n].abort(),i[n]=e.apply(this,arguments)):e.apply(this,arguments)}}(jQuery),function(t){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||t.each({focus:"focusin",blur:"focusout"},function(e,i){function s(e){return e=t.event.fix(e),e.type=i,t.event.handle.call(this,e)}t.event.special[i]={setup:function(){this.addEventListener(e,s,!0)},teardown:function(){this.removeEventListener(e,s,!0)},handler:function(e){return arguments[0]=t.event.fix(e),arguments[0].type=i,t.event.handle.apply(this,arguments)}}}),t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var n=t(i.target);return n.is(e)?s.apply(n,arguments):void 0})}})}(jQuery);
function playAudio(e){document.getElementById(e+"AudioSrc").play()}function stopAudio(e){document.getElementById(e+"AudioSrc").pause(),document.getElementById(e+"AudioControl").src="/assets/images/misc/speaker_off.gif"}function toggleAudio(e){document.getElementById(e+"AudioSrc").paused?(document.getElementById(e+"AudioSrc").play(),document.getElementById(e+"AudioControl").src="/assets/images/misc/speaker_on.gif"):(document.getElementById(e+"AudioSrc").pause(),document.getElementById(e+"AudioControl").src="/assets/images/misc/speaker_off.gif")}
function changeCountry(e){"billing"==e?setBillingStates():setShippingStates()}function setBillingStates(){if(cntrySel=document.getElementById("billing-country"),"CA"==cntrySel.options[cntrySel.selectedIndex].value)for(selectField=document.getElementById("billing-state"),selectField.options.length=0,newList=states.CA,i=0;i<newList.length;i++)selectField.options[selectField.length]=new Option(newList[i],newList[i]);else for(selectField=document.getElementById("billing-state"),selectField.options.length=0,newList=states.US,i=0;i<newList.length;i++)selectField.options[selectField.length]=new Option(newList[i],newList[i])}function setShippingStates(){if(cntrySel=document.getElementById("shipping-country"),"CA"==cntrySel.options[cntrySel.selectedIndex].value)for(selectField=document.getElementById("shipping-state"),selectField.options.length=0,newList=states.CA,i=0;i<newList.length;i++)selectField.options[selectField.length]=new Option(newList[i],newList[i]);else for(selectField=document.getElementById("shipping-state"),selectField.options.length=0,newList=states.US,i=0;i<newList.length;i++)selectField.options[selectField.length]=new Option(newList[i],newList[i])}var states=new Array;states.US=new Array("","Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","Washington DC","West Virginia","Wisconsin","Wyoming"),states.CA=new Array("","Alberta","British Columbia","Labrador","Manitoba","New Brunswick","Newfoundland","Northwest Territory","Nova Scotia","Nunavut","Ontario","Price Edward Island","Quebec","Saskatchewan","Yukon");
$(document).ready(function(){$("#billing-form").validate({rules:{email:{required:!0,email:!0},firstName:{required:!0},lastName:{required:!0},"billing-address":{required:!0},"billing-city":{required:!0},"billing-country":{required:!0},"billing-state":{required:!0},"billing-zip":{required:!0,minlength:5,maxlength:7},"card-cvv2":{required:!0,minlength:3,maxlength:4},creditCardNumber:{required:!0,minlength:13,maxlength:20},billadd:{required:!0},check1:{required:!1},name:{required:!0}},messages:{email:"",firstName:null,lastName:"","billing-address":"","billing-city":"","billing-country":"","billing-state":"","billing-zip":"","card-cvv2":"",creditCardNumber:"",billadd:"",check1:"<img src='/checkout/assets/warning-check.gif' style='position:absolute;left:-140px;top:-20px;' alt='You must agree to the terms to continue' title='You must agree to the terms to continue'>",state:""}})});
var floatingMenu={hasInner:"number"==typeof window.innerWidth,hasElement:"object"==typeof document.documentElement&&"number"==typeof document.documentElement.clientWidth},floatingArray=[];floatingMenu.add=function(e,t){var n,o;"string"==typeof e?n=e:o=e,void 0==t?floatingArray.push({id:n,menu:o,targetLeft:0,targetTop:0,distance:.07,snap:!0,updateParentHeight:!1}):floatingArray.push({id:n,menu:o,targetLeft:t.targetLeft,targetRight:t.targetRight,targetTop:t.targetTop,targetBottom:t.targetBottom,centerX:t.centerX,centerY:t.centerY,prohibitXMovement:t.prohibitXMovement,prohibitYMovement:t.prohibitYMovement,distance:void 0!=t.distance?t.distance:.07,snap:t.snap,ignoreParentDimensions:t.ignoreParentDimensions,updateParentHeight:void 0==t.updateParentHeight?!1:t.updateParentHeight,scrollContainer:t.scrollContainer,scrollContainerId:t.scrollContainerId,confinementArea:t.confinementArea,confinementAreaId:void 0!=t.confinementArea&&"#"==t.confinementArea.substring(0,1)?t.confinementArea.substring(1):void 0,confinementAreaClassRegexp:void 0!=t.confinementArea&&"."==t.confinementArea.substring(0,1)?new RegExp("(^|\\s)"+t.confinementArea.substring(1)+"(\\s|$)"):void 0})},floatingMenu.findSingle=function(e){e.id&&(e.menu=document.getElementById(e.id)),e.scrollContainerId&&(e.scrollContainer=document.getElementById(e.scrollContainerId))},floatingMenu.move=function(e){e.prohibitXMovement||(e.menu.style.left=e.nextX+"px",e.menu.style.right=""),e.prohibitYMovement||(e.menu.style.top=e.nextY+"px",e.menu.style.bottom="")},floatingMenu.scrollLeft=function(e){if(e.scrollContainer)return e.scrollContainer.scrollLeft;var t=window.top;return this.hasInner?t.pageXOffset:this.hasElement?t.document.documentElement.scrollLeft:t.document.body.scrollLeft},floatingMenu.scrollTop=function(e){if(e.scrollContainer)return e.scrollContainer.scrollTop;var t=window.top;return this.hasInner?t.pageYOffset:this.hasElement?t.document.documentElement.scrollTop:t.document.body.scrollTop},floatingMenu.windowWidth=function(){return this.hasElement?document.documentElement.clientWidth:document.body.clientWidth},floatingMenu.windowHeight=function(){return floatingMenu.hasElement&&floatingMenu.hasInner?document.documentElement.clientHeight>window.innerHeight?window.innerHeight:document.documentElement.clientHeight:floatingMenu.hasElement?document.documentElement.clientHeight:document.body.clientHeight},floatingMenu.documentHeight=function(){var e=this.hasInner?window.innerHeight:0,t=document.body,n=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight,e)},floatingMenu.documentWidth=function(){var e=this.hasInner?window.innerWidth:0,t=document.body,n=document.documentElement;return Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth,e)},floatingMenu.calculateCornerX=function(e){var t=e.menu.offsetWidth,n=this.scrollLeft(e)-e.parentLeft;return n+=e.centerX?(this.windowWidth()-t)/2:void 0==e.targetLeft?this.windowWidth()-e.targetRight-t:e.targetLeft,document.body!=e.menu.parentNode&&n+t>=e.confinedWidthReserve&&(n=e.confinedWidthReserve-t),0>n&&(n=0),n},floatingMenu.calculateCornerY=function(e){var t=e.menu.offsetHeight,n=this.scrollTop(e)-e.parentTop;return n+=e.centerY?(this.windowHeight()-t)/2:void 0===e.targetTop?this.windowHeight()-e.targetBottom-t:e.targetTop,document.body!=e.menu.parentNode&&n+t>=e.confinedHeightReserve&&(n=e.confinedHeightReserve-t),0>n&&(n=0),n},floatingMenu.isConfinementArea=function(e,t){return void 0!=e.confinementAreaId&&t.id==e.confinementAreaId||void 0!=e.confinementAreaClassRegexp&&t.className&&e.confinementAreaClassRegexp.test(t.className)},floatingMenu.computeParent=function(e){if(e.ignoreParentDimensions)return e.confinedHeightReserve=this.documentHeight(),e.confinedWidthReserver=this.documentWidth(),e.parentLeft=0,void(e.parentTop=0);var t=e.menu.parentNode,n=this.offsets(t,e);e.parentLeft=n.left,e.parentTop=n.top,e.confinedWidthReserve=t.clientWidth;var o=t,i=this.offsets(o,e);if(void 0==e.confinementArea)for(;o.clientHeight+i.top<e.menu.scrollHeight+n.top||e.menu.parentNode==o&&e.updateParentHeight&&o.clientHeight+i.top==e.menu.scrollHeight+n.top;)o=o.parentNode,i=this.offsets(o,e);else for(;void 0!=o.parentNode&&!this.isConfinementArea(e,o);)o=o.parentNode,i=this.offsets(o,e);e.confinedHeightReserve=o.clientHeight-(n.top-i.top)},floatingMenu.offsets=function(e,t){var n={left:0,top:0};if(e!==t.scrollContainer){for(;e.offsetParent&&e.offsetParent!=t.scrollContainer;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;if(window==window.top)return n;for(var o=window.top.document.body.getElementsByTagName("IFRAME"),i=0;i<o.length;i++)if(o[i].contentWindow==window)for(e=o[i];e.offsetParent;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n}},floatingMenu.doFloatSingle=function(e){this.findSingle(e),e.updateParentHeight&&(e.menu.parentNode.style.minHeight=e.menu.scrollHeight+"px");var t,n;this.computeParent(e);var o=this.calculateCornerX(e),t=(o-e.nextX)*e.distance;(Math.abs(t)<.5&&e.snap||Math.abs(o-e.nextX)<=1)&&(t=o-e.nextX);var i=this.calculateCornerY(e),n=(i-e.nextY)*e.distance;(Math.abs(n)<.5&&e.snap||Math.abs(i-e.nextY)<=1)&&(n=i-e.nextY),(Math.abs(t)>0||Math.abs(n)>0)&&(e.nextX+=t,e.nextY+=n,this.move(e))},floatingMenu.fixTargets=function(){},floatingMenu.fixTarget=function(e){},floatingMenu.doFloat=function(){this.fixTargets();for(var e=0;e<floatingArray.length;e++)this.fixTarget(floatingArray[e]),this.doFloatSingle(floatingArray[e]);setTimeout("floatingMenu.doFloat()",20)},floatingMenu.insertEvent=function(e,t,n){if(void 0!=e.addEventListener)return void e.addEventListener(t,n,!1);var o="on"+t;if(void 0!=e.attachEvent)return void e.attachEvent(o,n);var i=e[o];e[o]=function(e){e=e?e:window.event;var t=n(e);return void 0!=i&&1==i(e)&&1==t}},floatingMenu.init=function(){floatingMenu.fixTargets();for(var e=0;e<floatingArray.length;e++)floatingMenu.initSingleMenu(floatingArray[e]);setTimeout("floatingMenu.doFloat()",100)},floatingMenu.initSingleMenu=function(e){this.findSingle(e),this.computeParent(e),this.fixTarget(e),e.nextX=this.calculateCornerX(e),e.nextY=this.calculateCornerY(e),this.move(e)},floatingMenu.insertEvent(window,"load",floatingMenu.init),"undefined"!=typeof jQuery&&!function(e){e.fn.addFloating=function(e){return this.each(function(){floatingMenu.add(this,e)})}}(jQuery);
function isMobile(){return-1!=navigator.userAgent.indexOf("iPhone")||-1!=navigator.userAgent.indexOf("iPod")||screen.width<=699}